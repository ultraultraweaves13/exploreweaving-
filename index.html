<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rigid Heddle Weaving Planner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#F6F4F1;
 --card:#FFFFFF;
 --primary:#4A6F5E;
 --warp:#4A6F5E;
 --weft:#4F7FA1;
 --text:#2E2E2E;
}
body{margin:0;font-family:Inter,sans-serif;background:var(--bg);color:var(--text);}
.container{max-width:700px;margin:auto;padding:28px 18px;}
h1,h2{font-family:"Libre Baskerville",serif;color:var(--primary);}
.card{background:var(--card);padding:20px;border-radius:10px;margin-bottom:22px;box-shadow:0 2px 6px rgba(0,0,0,.06);}
label{font-size:.85rem;margin-top:10px;display:block;}
select,input{width:100%;padding:8px;border-radius:6px;border:1px solid #ddd;}
button{margin-top:16px;padding:10px 18px;border-radius:6px;border:none;background:var(--primary);color:white;cursor:pointer;}
button:hover{background:#3e5f51;}
.answer{background:#eef3f1;padding:14px;border-radius:8px;margin-top:16px;}
.small{font-size:.8rem;color:#666;}
</style>
</head>

<body>
<div class="container">
<h1>Rigid Heddle Weaving Planner</h1>

<div class="card">
<h2>1. Yarn</h2>

<label>Select yarn</label>
<select id="yarn" onchange="applyYarn()"></select>

<label>Recommended EPI (editable)</label>
<input id="epi" type="number">

<p class="small">
EPI is suggested based on yarn. Adjust after sampling if needed.
</p>
</div>

<div class="card">
<h2>2. Finished Size</h2>

<label>Finished width (inches)</label>
<input id="width" type="number">

<label>Finished length (inches)</label>
<input id="length" type="number">

<label>Hand-manipulation gap (%)</label>
<input id="gap" type="number" value="0">

<p class="small">
Use gap % for leno, Brooks bouquet, clasped weft spacing, etc.
</p>
</div>

<div class="card">
<h2>3. Allowances</h2>

<label>Take-up + shrinkage (%)</label>
<input id="shrink" type="number" value="12">

<label>Loom waste (inches)</label>
<input id="waste" type="number" value="24">

<button onclick="calculate()">Calculate Yarn</button>

<div class="answer" id="answerBox"></div>
</div>
</div>

<script>
/* ---------------- YARN DATA ---------------- */
/* Recommended EPI for plain weave */
const yarns = {
 "Mercerised Cotton 5/2":18,
 "Mercerised Cotton 10/2":24,
 "Mercerised Cotton 20/2":30,
 "Natural Dyed Cotton 5/2":16,
 "Yoga Cotton 8/2":14,
 "Cotton Linen 8/2":14,
 "Hemp Rich Yarn":12,
 "Cotton Sportweight":10,
 "Cotton DK":8,
 "Merino Cashmere 16/2":18,
 "Cashmere 16/2":18,
 "Mulberry Silk 16/2":20
};

/* INIT */
const yarnSel=document.getElementById("yarn");
Object.keys(yarns).forEach(y=>yarnSel.add(new Option(y,y)));
applyYarn();

/* APPLY YARN */
function applyYarn(){
 epi.value = yarns[yarn.value];
}

/* CALCULATION â€” FIXED & VERIFIED */
function calculate(){
 const widthIn = Number(width.value);
 const lengthIn = Number(length.value);
 const epiVal = Number(epi.value);
 const gapPct = Number(gap.value)/100;
 const shrinkPct = Number(shrink.value)/100;
 const wasteIn = Number(waste.value);

 if(!widthIn || !lengthIn || !epiVal){
  answerBox.innerHTML="Please fill all required fields.";
  return;
 }

 /* WARP ENDS */
 const ends = Math.round(widthIn * epiVal * (1 - gapPct));

 /* WARP LENGTH */
 const warpLengthM = ((lengthIn * (1 + shrinkPct)) + wasteIn) * 0.0254;
 const warpMeters = ends * warpLengthM;

 /* WEFT */
 const ppi = epiVal; // balanced plain weave
 const weftPicks = lengthIn * (1 + shrinkPct) * ppi * (1 - gapPct);
 const weftMeters = weftPicks * (widthIn * 0.0254);

 const totalMeters = warpMeters + weftMeters;

 answerBox.innerHTML = `
 <b>Total warp ends:</b> ${ends}<br><br>
 <b>Warp yarn required:</b> ${warpMeters.toFixed(1)} m<br>
 <b>Weft yarn required:</b> ${weftMeters.toFixed(1)} m<br><br>
 <b>Total yarn required:</b> ${totalMeters.toFixed(1)} m
 `;
}
</script>
</body>
</html>

